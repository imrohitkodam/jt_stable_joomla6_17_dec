var jlikeRatingUI={saveRatingForm:function(e){if(!jlikeRatingUI.checkJlikeRating())return jQuery(".message").html('<span class="alert alert-danger col-md-12">'+Joomla.Text._("COM_JLIKE_RATING_INVALID_FIELD_RATING")+"</span>"),!1;jQuery("#saveRating").attr("disabled","disabled");var t=jQuery("#"+e).serialize();jlikeRatingService.post(t,function(e){e.success?(jQuery(".ratingForm").hide(),jlikeRatingUI.showRatingData(),jQuery(".message").html("")):(jQuery(".message").html('<span class="alert alert-danger col-md-12">'+e.message+"</span>"),jQuery("#saveRating").removeAttr("disabled"))})},checkJlikeRating:function(){for(var e=document.getElementsByName("rating"),t=0,a=e.length;t<a;t++)if(e[t].checked)return!0;return!1},getRatings:function(){jQuery("#start").val("0"),jQuery("#ratingList").empty();jlikeRatingService.initRatings(function(e){e.success&&(jlikeRatingUI.displayRating(e),jlikeRatingUI.showMoreButton(e))})},loadMoreRating:function(){jlikeRatingService.initRatings(function(e){jlikeRatingUI.displayRating(e),jlikeRatingUI.showMoreButton(e)})},displayRating:function(e){var i=jQuery("#start").val();jQuery.each(e.data.result,function(e,t){var a=document.getElementById("entry-template").innerHTML,n=Handlebars.compile(a)({info:t});i++,jQuery("#start").val(i),jQuery("#ratingList").append(n)}),e.data.start=i},showMoreButton:function(e){Number(e.data.start)>=Number(e.data.total)?jQuery("#load-more-rating-button").hide():jQuery("#load-more-rating-button").show()},showRatingData:function(){jlikeRatingService.displayRatingData(function(e){if(e.success){var t=document.getElementById("entry-template").innerHTML,a=Handlebars.compile(t)({info:e.data});jQuery("#ratingDetailview").append(a)}})}};Handlebars.registerHelper("times",function(e,t){for(var a="",n=e.rating_scale;0<n;n--){var i={key:n,id:e.id,checked:""};n==e.rating&&(i.checked='checked="checked"'),a+=t.fn(i)}return a}),jQuery(document).ready(function(){jlikeRatingUI.showRatingData(),jlikeRatingUI.getRatings()});